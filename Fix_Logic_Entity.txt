--[[
    Vynixu Entity Spawner V2 - Đã lược bỏ Rebounding & Camera Shake
]]--

if VynixuEntitySpawnerV2 then return VynixuEntitySpawnerV2 end

-- Services
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

-- Variables
local localPlayer = Players.LocalPlayer
local localChar = localPlayer.Character or localPlayer.CharacterAdded:Wait()
local localHum = localChar:WaitForChild("Humanoid")
local localCollision = localChar:WaitForChild("Collision")
local localCamera = workspace.CurrentCamera
local playerGui = localPlayer:WaitForChild("PlayerGui")
local gameStats = ReplicatedStorage:WaitForChild("GameStats")
local gameData = ReplicatedStorage:WaitForChild("GameData")
local floorReplicated = ReplicatedStorage:WaitForChild("FloorReplicated")
local remotesFolder = ReplicatedStorage:WaitForChild("RemotesFolder")

local lastRespawn;
local BaseEntitySpeed = 65
local colourGuiding = Color3.fromRGB(137, 207, 255)
local colourCurious = Color3.fromRGB(253, 255, 133)

-- [ Các hàm helper giữ nguyên: CloneTable, GetNodesFromRoom, vv. ]
-- (Tôi lược bớt phần liệt kê helper để bạn dễ theo dõi logic chính bên dưới)

local defaultConfig = {
	Entity = {
		Name = "Template Entity",
		Asset = "https://github.com/RegularVynixu/Utilities/blob/main/Doors%20Entity%20Spawner/Models/Rush.rbxm?raw=true",
		HeightOffset = 0
	},
	Movement = {
		Speed = 100,
		Delay = 2,
		Reversed = false
	},
	Damage = {
		Enabled = true,
		Range = 40,
		Amount = 125
	},
    -- ĐÃ LOẠI BỎ REBOUNDING TẠI ĐÂY
	Lights = {
		Flicker = { Enabled = true, Duration = 1 },
		Shatter = true,
		Repair = false
	},
	Earthquake = { Enabled = true },
    -- ĐÃ LOẠI BỎ CAMERASHAKE TẠI ĐÂY
	Crucifixion = {
		Type = "Curious",
		Enabled = true,
		Range = 40,
		Resist = false,
		Break = true
	},
	Death = {
		Type = "Guiding",
		Hints = {"Death", "Hints", "Go", "Here"},
		Cause = ""
	}
}

-- ... [ Các hàm logic trung gian giữ nguyên ]

spawner.Run = function(entityTable)
	task.spawn(function()
		-- Bỏ qua kiểm tra Rebounding trong PrerunCheck
		local model = entityTable.Model
		local config = entityTable.Config
		local debug = entityTable.Debug
		
		model:SetAttribute("Running", true)
	
		local spawnPoint;
		local rooms = workspace.CurrentRooms:GetChildren()
		if config.Movement.Reversed then
			spawnPoint = rooms[#rooms]:FindFirstChild("RoomExit")
		else
			spawnPoint = rooms[1]:FindFirstChild("RoomEntrance")
		end
	
		if spawnPoint then
			model:PivotTo(spawnPoint.CFrame + Vector3.new(0, config.Entity.HeightOffset, 0))
			model.Parent = workspace
			task.spawn(entityTable.RunCallback, entityTable, "OnSpawned")
	
			task.wait(config.Movement.Delay)
			task.spawn(entityTable.RunCallback, entityTable, "OnStartMoving")
			
			-- Vòng lặp giám sát (Đã xóa Camera Shake)
			task.spawn(function()
				while model.Parent do
					if not model:GetAttribute("Paused") then
						local pivot = model:GetPivot()
						local charPivot = localCollision.CFrame
						local inSight = PlayerInLineOfSight(model, config)
	
						-- Room & Damage detection (giữ nguyên logic gốc)
						-- ... [Phần code xử lý Room/Crucifix/Damage giữ nguyên]
                        
						-- ĐÃ XÓA TOÀN BỘ KHỐI CODE "Camera shaking" TẠI ĐÂY
					end
					task.wait()
				end
			end)
			
			-- Pathfinding (Đã đơn giản hóa, xóa bỏ Rebounding)
			task.spawn(function()
				-- Chỉ lấy nodes và đi thẳng
				local pathfindNodes = GetPathfindNodesAmbush(config)
				for _, n in pathfindNodes do
					local cframe = n.CFrame + Vector3.new(0, 3 + config.Entity.HeightOffset, 0)
					EntityMoveTo(model, cframe, config.Movement.Speed)
					task.spawn(entityTable.RunCallback, entityTable, "OnReachNode", n)
				end
				
				-- Despawning
				if not model:GetAttribute("Despawning") then
					model:SetAttribute("Despawning", true)
					task.spawn(entityTable.RunCallback, entityTable, "OnDespawning")
					EntityMoveTo(model, model:GetPivot() - Vector3.new(0, 300, 0), config.Movement.Speed)
					entityTable:Despawn()
				end
			end)
		end
	end)
end

-- ... [ Phần khởi tạo cuối file giữ nguyên ]
return spawner
